# Daily Progress Report — 2025-10-13

## Summary
We kicked off the **GSOD & ISD** data pipeline to support Yangtze flood reconstruction and future **WRF/WRF-Hydro + data assimilation** experiments. Work today covered reliable bulk download, safe extraction, repo hygiene, and citation standardization. Format follows the prior daily note.

---

## 1) Data acquisition & organization

- **GSOD (Global Surface Summary of the Day)**
  - Created `data/gsod/{raw,extracted,metadata,reports}` and standardized the docs folder name to **`metadata/`**.
  - Bulk download initialized from the archive index (`1929–2025`, one `.tar.gz` per year).
  - Safe, resumable extractor prepared (Python) to unpack per-year into `data/gsod/extracted/`.
  - Downloaded GSOD metadata files into `data/gsod/metadata/` (country list, readme, format notes, sample).

- **ISD / Global Hourly (Integrated Surface Database)**
  - Staged `data/isd/{raw,metadata,reports}`.
  - **Long-running downloader** started for `archive/isd/` (auto-select latest `isd_YYYY_c*.tar.gz`, resume on retries).
  - Pulled ISD docs (`CSV_HELP.pdf`, `isd-format-document.pdf`, `sample.csv`) into `metadata/`.

- **Process control & storage**
  - Used **tmux** to run ISD download and GSOD extraction in parallel, safe from local sleep/disconnect.
  - Checked disk usage (`df -h`, `du -sh data/gsod/raw`, etc.) before extraction to avoid space pressure.

---

## 2) Scripts & ops notes

- `scripts/download_gsod.sh` – Year-wise GSOD bulk fetch (idempotent).
- `scripts/extract_gsod_safely.py` – Path-safe, resumable per-year extraction (skips existing, logs progress).
- `scripts/download_isd.sh` – Parses `archive/isd/` index, grabs **latest** yearly `isd_YYYY_c*.tar.gz` with `--continue` and retries.
- `.gitignore` updated to exclude large archives and extracted bulk; only scripts, metadata, and reports are versioned.

Branch: **`feature/filter-china-stations`** (commits pushed at end of day).

---

## 3) How the three datasets differ (and how we’ll use them)

| Dataset | Resolution | Contents | Time convention | Primary use in our project |
|---|---|---|---|---|
| **GSOD** (ISD-derived daily) | **Daily** | Mean/Max/Min T, PRCP, **SLP/STP**, wind, visibility, weather flags | UTC day (≡ **BJ 08–08**; perfect for China) | **Daily background & model forcing at day step**, rapid station QC, long-term stats where pressure is needed |
| **GHCN-Daily** (climate product) | **Daily** | Tmax, Tmin, PRCP, snow depth (climate-grade QC, long records) | Local/UTC per product; we aggregate consistently | **Authoritative daily climate baselines**, continuity checks, **independent daily verification** of downscaled fields |
| **ISD / Global Hourly** | **Hourly/3-hourly** | Station-level **hourly** obs: SLP/STP, T, Td, wind, weather | UTC | **WRF/WRF-Hydro data assimilation & process validation**; reconstruct sub-daily dynamics (fronts, pressure falls, winds) |

**Plan**
- Near term: use **GSOD** for daily analyses (including pressure) and **GHCN-Daily** as a climate-grade cross-check.
- When we run **WRF + DA**: ingest **ISD hourly** (and CMA if available) for 1–3 h cycling; verify daily aggregates against GSOD/GHCN-Daily.
- Hydrology: for daily-step experiments (RRI/SWAT), GSOD is sufficient; for **WRF-Hydro**, use ISD-driven hourly forcings.

---

## 4) Citations to include in repo/docs

### GSOD
> **Cite as:**  
> NOAA National Centers of Environmental Information (NCEI). 1999. *Global Surface Summary of the Day (GSOD), Version 1.0* [**subset: China, 1950–2020**]. NOAA National Centers for Environmental Information. **Accessed 2025-10-13.**

### ISD / Global Hourly (AWS Open Data form provided)
> **How to Cite:**  
> **NOAA Integrated Surface Database (ISD) was accessed on 2025-10-13 from https://registry.opendata.aws/noaa-isd.**

*(If a journal prefers an NCEI-site citation, we can also add the NCEI Global Hourly “Cite as” line in parallel.)*

---

## 5) Next steps (2025-10-14)
- Finish GSOD extraction (per-year) and produce a **China / Yangtze station inventory**.
- Generate **GSOD ↔ ISD station crosswalk** (WMO/WBAN/lat–lon) to streamline DA ingestion.
- Start hourly→daily aggregation for **ISD vs GSOD/GHCN-Daily** bias checks (BJ 08–08 convention).
- Stage WRFDA templates (1–3 h cycling; psfc/T2/Q2/U10/V10) and a minimal verification dashboard.

